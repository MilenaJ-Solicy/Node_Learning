var Enum = require("./lib/enum");

var fibo = new Enum(
    function next() {
        var data = this.data;
        !data.count && (data.count = 0);
        !data.cache && (data.cache = []);

        var n;
        if (data.count < 2)
            n = data.count;
        else
            n = data.cache[0] + data.cache[1];

        data.cache.push(n);
        data.cache = data.cache.slice(-2); // We only cache last 2 values
        data.count++;

        return n;
    },

    function count() { return Infinity; },

    function clone() {
        var _clone = fibo();
        _clone.data.count = this.data.count;
        _clone.data.cache = [this.cache[0], this.cache[1]];
        return clone;
    }
);

for (var i = 0; i < 300; i++)
    console.log(fibo.get());


var seq2 = Enum.fromArray([1, 2, 3, 4, 5, 6]);
    var even = function(e) {
        return e % 2 === 0;
    };

    console.log(seq2.find(even)); // Returns 2